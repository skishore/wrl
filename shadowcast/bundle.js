(()=>{"use strict";var n={"./src/example0.ts":(e,t,n)=>{n.r(t),n.d(t,{initExample0:()=>function(n,r){var o,c,l,a,s,u,i,d,f,p,e=document.getElementById("example0"),t=null==e?void 0:e.getElementsByClassName("foreground"),m=null==e?void 0:e.getElementsByClassName("background"),h=document.getElementById("outlines"),v=document.getElementById("walls"),g=document.getElementById("umbra");e&&v&&g&&h&&t&&1==t.length&&m&&1==m.length&&(o=t[0],c=m[0],t=function(e,t,n,r){var o=e.textContent,c=t.textContent;if(!o||o.length<n*r)return null;if(!c||c.length<n*r)return null;for(var l=[],a=[],s=0;s<r;s++){l.push([]),a.push([]);for(var u=0;u<n;u++){var i=s*(n+1)+u;if("·"==o[i]||"#"==o[i])l[s].push(!0),a[s].push(o[i]);else if("·"==c[i]||"#"==c[i])l[s].push(!1),a[s].push(c[i]);else{if("@"!=o[i])return null;l[s].push(!0),a[s].push("@")}}}return[l,a]}(o,c,n,r))&&(l=t[0],a=t[1],s=(r-1)/2,u=(n-1)/2,i=e.getBoundingClientRect().width/n,f=d=0,p=null,h.addEventListener("input",function(){h.checked?e.classList.remove("hide-outlines"):e.classList.add("hide-outlines")}),e.addEventListener("mousedown",function(){if("#"==a[d][f])p="·";else{if("·"!=a[d][f])return;p="#"}a[d][f]=p;var e=x(s,u,a,l);w(l,a,o,c,v,g,e)}),e.addEventListener("mousemove",function(e){var t=Math.floor(e.offsetX/i),e=Math.floor(e.offsetY/i);e==d&&t==f||r<=e||n<=t||(d=e,f=t,p&&"@"!=a[d][f]&&(a[d][f]=p,e=x(s,u,a,l),w(l,a,o,c,v,g,e)))}),window.addEventListener("mouseup",function(){p=null}),m=x(s,u,a,l),w(l,a,o,c,v,g,m))}});var h=n("./src/fov_common.ts");function w(r,o,e,t,n,c,l){function a(e){var t=e[0],e=e[1];return"".concat(5+10*e," ").concat(5+10*t)}e.textContent=o.map(function(e,n){return e.map(function(e,t){return r[n][t]?e:" "}).join("")}).join("\n"),t.textContent=o.map(function(e,n){return e.map(function(e,t){return r[n][t]?" ":e}).join("")}).join("\n"),n.setAttribute("d",""),c.setAttribute("d","");for(var s="",u=!1,i=0;i<l.length;i++){var d=l[i];"Move"==d?u=!0:u?(s+=" M ".concat(a(d)),u=!1):s+=" L ".concat(a(d))}function f(e,t){return 0<=e&&0<=t&&e<o.length&&t<o[e].length&&"#"==o[e][t]}c.setAttribute("d",s);e=(0,h.traceAllWalls)(function(e){for(var t=0;t<o.length;t++)for(var n=-1;n<o[t].length;n++)!f(t,n)&&f(t,n+1)&&e(t,n+1)},f);n.setAttribute("d",e)}function x(c,l,a,s){for(var e=0;e<s.length;e++)for(var t=0;t<s[e].length;t++)s[e][t]=!1;s[c][l]=!0;var u=["Move"];function i(e,t,n,r){var e=e.depth,n=(1&n&&(e=-e),2&n&&(n=e,e=t,t=n),c+e),o=l+t;return!r&&(o<0||n<0||n>=a.length||o>=a[0].length)?null:[c+e,l+t]}function d(e,t,n){e=i(e,t,n);return!e||(t=e[0],n=e[1],"#"==a[t][n])}function f(e,t,n){e=i(e,t,n);if(e)return t=e[0],n=e[1],"·"==a[t][n]}function p(e,t,n){1==t.den&&1==Math.abs(t.num)||(e=i(e={depth:e.depth,start:e.start,end:e.end},e.depth*t.num/t.den,n,!0))&&u.push(e)}function m(e,t){p(e,e.start,t),u.push("Move");for(var n,r,o,c=(0,h.minCol)(e);c<=(0,h.maxCol)(e);c++)(d(e,c,t)||(0,h.isSymmetric)(e,c))&&(n=i(n=e,r=c,o=t))&&(r=n[0],o=n[1],s[r][o]=!0);for(var l=(0,h.minCol)(e);l<(0,h.maxCol)(e);l++){var a=l+1;d(e,l,t)&&f(e,a,t)&&(e.start=(0,h.slope)(e,a)),f(e,l,t)&&d(e,a,t)&&(p(e,e.start,t),m({depth:e.depth+1,start:e.start,end:(0,h.slope)(e,a)},t),p(e,(0,h.slope)(e,a),t),u.push("Move"))}f(e,(0,h.maxCol)(e),t)&&(p(e,e.start,t),m({depth:e.depth+1,start:e.start,end:e.end},t)),p(e,e.end,t)}for(var n=0;n<4;n++)m(e={depth:1,start:{num:-1,den:1},end:{num:1,den:1}},n),u.push("Move");return u}},"./src/example2.ts":(e,t,n)=>{n.r(t),n.d(t,{initExample2:()=>function(a){var s,u,i,d,f,n,p,m,r,o,e=document.getElementById("example2"),t=null==e?void 0:e.getElementsByClassName("foreground"),c=null==e?void 0:e.getElementsByClassName("background"),l=document.getElementById("prev2"),h=document.getElementById("next2"),v=document.getElementById("slider2"),g=document.getElementById("walls2"),w=document.getElementById("start2"),x=document.getElementById("end2"),k=document.getElementById("row2"),y=document.getElementById("col2"),b=Array.from(document.querySelectorAll("#example2wrapper .line"));e&&t&&1==t.length&&c&&1==c.length&&l&&h&&v&&g&&w&&x&&k&&y&&(s=t[0],u=c[0],i=function(e,t,n){var r=e.textContent,o=t.textContent;if(!r||!o)return null;for(var c=[],l=[],a=0,s=0;s<n;s++){c.push([]),l.push([]),a+=n-s-1;for(var u=n-1-s;u<n+s;u++,a++)if("·"==r[a]||"#"==r[a])l[s][u]=r[a];else if("·"==o[a]||"#"==o[a])l[s][u]=o[a];else{if("@"!=r[a])return null;l[s][u]="@"}a++}e={visible:c,text:l,tick:0,maxTick:0,line:[],start:[],end:[],row:[],col:[]};return A(0,n-1,e,n-1),e.tick=1,e}(s,u,a))&&(d=i.text,v.max=i.maxTick,v.value="1",f=a-1,n=e.getBoundingClientRect().height/a,m=p=0,r=null,o=function(e){if(d[p][m]=e,i.tick==i.maxTick)A(0,f,i,a-1);else{for(var t=i.line[i.tick],n=i.row[i.tick],r=i.col[i.tick],o=(A(0,f,i,a-1),null),c=null,l=0;l<i.maxTick;l++)if(i.row[l]==n&&i.col[l]==r){if(i.line[l]==t){o=l;break}null==c&&(c=l)}null!=o?i.tick=o:null!=c&&(i.tick=c)}v.max=i.maxTick,v.value=i.tick,E(i,s,u,g,w,x,k,y,b)},e.addEventListener("mousedown",function(){if(C(p,m,a)){if("#"==d[p][m])r="·";else{if("·"!=d[p][m])return;r="#"}o(r)}}),e.addEventListener("mousemove",function(e){var t=Math.floor(e.offsetX/n),e=Math.floor(e.offsetY/n);e==p&&t==m||C(p=e,m=t,a)&&r&&"@"!=d[p][m]&&o(r)}),window.addEventListener("mouseup",function(){r&&(r=null,v.focus({preventScroll:!0}))}),v.addEventListener("input",function(){i.tick=this.valueAsNumber,E(i,s,u,g,w,x,k,y,b)}),l.addEventListener("click",function(){1<i.tick&&(i.tick--,v.value=i.tick,E(i,s,u,g,w,x,k,y,b)),v.focus({preventScroll:!0})}),h.addEventListener("click",function(){var e=i.maxTick;i.tick<e&&(i.tick++,v.value=i.tick,E(i,s,u,g,w,x,k,y,b)),v.focus({preventScroll:!0})}),E(i,s,u,g,w,x,k,y,b))}});var v=n("./src/fov_common.ts");function E(n,e,t,r,o,c,l,a,s){var u=n.visible,i=n.text;function d(e,t){return u[e][t]<=n.tick}var f=i.length;function p(e,t){return 0<=e&&f-1-e<=t&&e<f&&t<i[e].length&&"#"==i[e][t]}e.textContent=i.map(function(e,t){for(var n=[],r=f-1-t,o=0;o<f+t;o++)o<r||!d(t,o)?n.push(" "):n.push(e[o]);return n.join("")}).join("\n"),t.textContent=i.map(function(e,t){for(var n=[],r=f-1-t,o=0;o<f+t;o++)o<r||d(t,o)?n.push(" "):n.push(e[o]);return n.join("")}).join("\n");var m,h,e=(0,v.traceAllWalls)(function(e){for(var t=0;t<f;t++)for(var n=f-2-t;n<f+t;n++)!p(t,n)&&p(t,n+1)&&e(t,n+1)},p);r.setAttribute("d",e),n.tick==n.maxTick?(null!=(r=null==(t=document.querySelector("#example2wrapper .current.line"))?void 0:t.classList)&&r.remove("current"),o.setAttribute("d",""),c.setAttribute("d",""),a.setAttribute("d",""),l.setAttribute("d","")):(null!=(t=null==(e=document.querySelector("#example2wrapper .current.line"))?void 0:e.classList)&&t.remove("current"),s[n.line[n.tick]].classList.add("current"),e=(r=10*n.row[n.tick])*n.start[n.tick],t=r*n.end[n.tick],m=(s=5+10*(f-1))-5+10*Math.floor(.5+n.row[n.tick]*n.start[n.tick]),h=5+s+10*Math.ceil(n.row[n.tick]*n.end[n.tick]-.5),l.setAttribute("d","M ".concat(m," ").concat(r," H ").concat(h," v 10 H ").concat(m," Z")),o.setAttribute("d","M ".concat(s," ").concat(5," l ").concat(e," ").concat(r)),c.setAttribute("d","M ".concat(s," ").concat(5," l ").concat(t," ").concat(r)),null==(l=n.col[n.tick])?a.setAttribute("d",""):(h=5+10*n.row[n.tick],a.setAttribute("d","M ".concat(s+10*l-5," ").concat(h-5," l 10 0 l 0 10 l -10 0 Z")),a.classList.replace("double","single")))}function A(n,r,a,s){for(var u=a.visible,o=a.text,e=0;e<u.length;e++)for(var t=0;t<u[e].length;t++)u[e][t]=1/0;function i(e,t){return e.depth>=o.length?null:(e=e.depth,[n+e,r+t])}function d(e,t){var e=i(e,t);return!e||(t=e[0],e=e[1],"#"==o[t][e])}function f(e,t){var e=i(e,t);if(e)return t=e[0],e=e[1],"·"==o[t][e]}u[n][r]=0,a.line=[0],a.start=[-1],a.end=[1],a.row=[0],a.col=[0],a.tick=0;!function e(t){if(!(t.depth>s)){p(1,t,null,a),p(2,t,null,a);for(var n,r,o=(0,v.minCol)(t);o<=(0,v.maxCol)(t);o++)p(3,t,o,a),(d(t,o)||(0,v.isSymmetric)(t,o))&&(p(4,t,o,a),n=i(n=t,r=o))&&(r=n[0],n=n[1],u[r][n]=a.tick+1),o==(0,v.minCol)(t)?(p(5,t,o,a),p(7,t,o,a)):(r=o-1,p(5,t,o,a),d(t,r)&&f(t,o)&&(p(6,t,o,a),t.start=(0,v.slope)(t,o)),p(7,t,o,a),f(t,r)&&d(t,o)&&(p(8,t,o,a),p(9,t,o,a),c={depth:t.depth+1,start:t.start,end:(0,v.slope)(t,o)},p(10,t,o,a),e(c))),p(11,t,o,a);var c,l=(0,v.maxCol)(t);p(12,t,l,a),f(t,l)&&(p(13,t,l,a),e(c={depth:t.depth+1,start:t.start,end:t.end})),p(14,t,null,a)}}({depth:1,start:{num:-1,den:1},end:{num:1,den:1}}),a.maxTick=++a.tick}function C(e,t,n){return 0<=e&&e<n&&n-1-e<=t&&t<n+e}function p(e,t,n,r){r.tick++,r.line.push(e),r.start.push(t.start.num/t.start.den),r.end.push(t.end.num/t.end.den),r.row.push(t.depth),r.col.push(n)}},"./src/example3.ts":(e,t,n)=>{n.r(t),n.d(t,{initExample3:()=>function(){var r,o,e,c=document.getElementById("tiles_line1"),l=document.getElementById("tiles_line2"),t=document.getElementById("tiles_slope1"),n=document.getElementById("tiles_slope2"),a=document.getElementsByClassName("inscribed");c&&l&&t&&n&&(r=t.valueAsNumber,o=n.valueAsNumber,(e=function(){var e=Math.min(r,o),t=Math.max(r,o);c.setAttribute("x2","".concat(3.125*e)),l.setAttribute("x2","".concat(3.125*t));for(var n=0;n<a.length;n++)n<(e+1)/40-.5||(t-1)/40+.5<n?a[n].setAttribute("stroke","none"):a[n].setAttribute("stroke","#fd8")})(),t.addEventListener("input",function(){r=this.valueAsNumber,e()}),n.addEventListener("input",function(){o=this.valueAsNumber,e()}))}})},"./src/fov_common.ts":(e,t,n)=>{function c(e){switch(e.edge){case"N":return[5+10*e.col,5+10*e.row-5].join(" ");case"S":return[5+10*e.col,5+10*e.row+5].join(" ");case"E":return[5+10*e.col+5,5+10*e.row].join(" ");case"W":return[5+10*e.col-5,5+10*e.row].join(" ")}}function l(e){switch(e.edge){case"N":return{row:e.row,col:e.col+1,edge:e.edge};case"S":return{row:e.row,col:e.col-1,edge:e.edge};case"E":return{row:e.row+1,col:e.col,edge:e.edge};case"W":return{row:e.row-1,col:e.col,edge:e.edge}}}function a(e){switch(e.edge){case"N":return{row:e.row-1,col:e.col+1,edge:"W"};case"S":return{row:e.row+1,col:e.col-1,edge:"E"};case"E":return{row:e.row+1,col:e.col+1,edge:"N"};case"W":return{row:e.row-1,col:e.col-1,edge:"S"}}}n.r(t),n.d(t,{isSymmetric:()=>function(e,t){return t*e.start.den>=e.depth*e.start.num&&t*e.end.den<=e.depth*e.end.num},maxCol:()=>function(e){return Math.ceil(e.depth*e.end.num/e.end.den-.5)},minCol:()=>function(e){return Math.floor(.5+e.depth*e.start.num/e.start.den)},slope:()=>function(e,t){return{num:2*t-1,den:2*e.depth}},traceAllWalls:()=>function(e,n){var r=[],o=new Set;return e(function(e,t){e={row:e,col:t,edge:"W"};o.has(c(e))||r.push(function(e,t,n){var r=[e];t.add(c(e));for(;;){if(r.push.apply(r,function(e,t){return t(l(e))?t(a(e))?[function(e){switch(e.edge){case"N":return{row:e.row,col:e.col+.5,edge:e.edge};case"S":return{row:e.row,col:e.col-.5,edge:e.edge};case"E":return{row:e.row+.5,col:e.col,edge:e.edge};case"W":return{row:e.row-.5,col:e.col,edge:e.edge}}}(e),a(e)]:[l(e)]:[function(e){switch(e.edge){case"N":return{row:e.row,col:e.col,edge:"E"};case"S":return{row:e.row,col:e.col,edge:"W"};case"E":return{row:e.row,col:e.col,edge:"S"};case"W":return{row:e.row,col:e.col,edge:"N"}}}(e)]}(e,n)),(e=r[r.length-1]).row==r[0].row&&e.col==r[0].col&&e.edge==r[0].edge)break;"W"==e.edge&&t.add(c(e))}return function(e){for(var t="M ".concat(c(e[0])),n=1;n<e.length;n++)t+=" L ".concat(c(e[n]));return t}(r)}(e,o,function(e){var t=e.row,e=e.col;return n(t,e)}))}),r.join(" ")}})},"./src/highlight.ts":(e,t,n)=>{function o(e){var t=/^(.+), (.+)/.exec(e);return null!==t?"".concat(o(t[1]),'<span class="dot">,</span> ').concat(o(t[2])):e}n.r(t),n.d(t,{highlight:()=>function(e,n){var r,t=e.textContent;t&&(r=function(e){if(!e)return"";var t=/(.*)(from|import)(.*)/.exec(e);if(null!==t)return"".concat(r(t[1]),'<span class="key">').concat(t[2],"</span>").concat(r(t[3]));t=/^def (\w+)\((.*)\):/.exec(e);if(null!==t)return(n?'<span class="key">def</span> <span class="def" id="'.concat(t[1],'">'):'<span class="key">def</span> <span class="def">').concat(t[1],"</span>(").concat(o(t[2]),"):");var t=/^class (\w+)(.*):/.exec(e);return null!==t?(n?'<span class="key">class</span> <span class="def" id="'.concat(t[1],'">'):'<span class="key">class</span> <span class="def">').concat(t[1],"</span>").concat(t[2],":"):null!==(t=/^return (.+)/.exec(e))?'<span class="key">return</span> '.concat(r(t[1])):null!==/^return/.exec(e)?'<span class="key">return</span>':null!==(t=/^yield (.+)/.exec(e))?'<span class="key">yield</span> '.concat(r(t[1])):null!==(t=/^for (.+) in (.+):/.exec(e))?'<span class="key">for</span> '.concat(r(t[1]),' <span class="key">in</span> ').concat(r(t[2]),":"):null!==(t=/^while (.+):/.exec(e))?'<span class="key">while</span> '.concat(r(t[1]),":"):null!==(t=/^if (.+):/.exec(e))?'<span class="key">if</span> '.concat(r(t[1]),":"):null!==(t=/(.*)\b(\w+)\((.*)/.exec(e))?"".concat(r(t[1]),'<a class="fn" href="#').concat(t[2],'">').concat(t[2],"</a>(").concat(r(t[3])):null!==(t=/^(.*) (and|or|==|>=|<=|is not|is|in|\+|\*|-|=) (.*)/.exec(e))?"".concat(r(t[1]),' <span class="op">').concat(t[2],"</span> ").concat(r(t[3])):null!==(t=/^(.*)not(.*)/.exec(e))?"".concat(r(t[1]),'<span class="op">not</span>').concat(r(t[2])):null!==(t=/^(.*)\.(.*)/.exec(e))?"".concat(r(t[1]),'<span class="dot">.</span>').concat(r(t[2])):null!==(t=/^(.+),(.*)/.exec(e))?"".concat(r(t[1]),'<span class="dot">,</span>').concat(r(t[2])):null!==(t=/(.*)\bself\b(.*)/.exec(e))?"".concat(r(t[1]),'<span class="self">self</span>').concat(r(t[2])):e},e.innerHTML=t.split("\n").map(function(e){var t=/[^ ]/.exec(e);return null!==t&&0<t.index?'<div class="line">'.concat(e.substring(0,t.index)).concat(r(e.substring(t.index)),"</div>"):'<div class="line">'.concat(r(e),"</div>")}).join("\n"))}})}},r={};function o(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},n[e](t,t.exports,o)),t.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})({});for(var e=o("./src/highlight.ts"),t=o("./src/example0.ts"),c=o("./src/example2.ts"),l=o("./src/example3.ts"),a=document.querySelectorAll("#appendix .python3"),s=0;s<a.length;s++)(0,e.highlight)(a[s],!0);for(a=document.querySelectorAll("#example2wrapper .python3"),s=0;s<a.length;s++)(0,e.highlight)(a[s],!1);(0,t.initExample0)(33,11),(0,c.initExample2)(8),(0,l.initExample3)()})();